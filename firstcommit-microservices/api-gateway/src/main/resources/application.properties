# ===============================================
# CONFIGURACIÓN DEL API GATEWAY
# ===============================================
server.port=8080
spring.application.name=api-gateway

# ===============================================
# CONFIGURACIÓN DE RUTAS DE SPRING CLOUD GATEWAY
# ===============================================
# Activa el descubrimiento de rutas para que el Gateway pueda encontrar los servicios.
# lb:// es el prefijo para "load balancer", le dice al gateway que use el descubrimiento de servicios.
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# --- Ruta para IAM Service ---
# Cuando una petición llega a /api/v1/iam/**
# la reenvía a http://iam-service:8080/api/v1/iam/**
spring.cloud.gateway.routes[0].id=iam-service
spring.cloud.gateway.routes[0].uri=lb://iam-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/v1/iam/**

# --- Ruta para Courses Service ---
# Cuando una petición llega a /api/v1/courses/**
# la reenvía a http://courses-service:8080/api/v1/courses/**
spring.cloud.gateway.routes[1].id=courses-service
spring.cloud.gateway.routes[1].uri=lb://courses-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/v1/courses/**

# --- Ruta para Roadmaps Service ---
# Cuando una petición llega a /api/v1/roadmaps/**
# la reenvía a http://roadmaps-service:8080/api/v1/roadmaps/**
spring.cloud.gateway.routes[2].id=roadmaps-service
spring.cloud.gateway.routes[2].uri=lb://roadmaps-service
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/v1/roadmaps/**

# --- Ruta para Projects Service ---
# Cuando una petición llega a /api/v1/projects/**
# la reenvía a http://projects-service:8080/api/v1/projects/**
spring.cloud.gateway.routes[3].id=projects-service
spring.cloud.gateway.routes[3].uri=lb://projects-service
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/v1/projects/**

# --- Ruta para Memberships Service ---
# Cuando una petición llega a /api/v1/memberships/**
# la reenvía a http://memberships-service:8080/api/v1/memberships/**
spring.cloud.gateway.routes[4].id=memberships-service
spring.cloud.gateway.routes[4].uri=lb://memberships-service
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/v1/memberships/**